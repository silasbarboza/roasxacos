<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline' https://cdn.tailwindcss.com https://www.googletagmanager.com https://connect.facebook.net; connect-src 'self' https://www.google-analytics.com https://www.facebook.com; img-src 'self' data: https:; font-src 'self' https: data:; style-src 'self' 'unsafe-inline' https:;">

    <!-- SEO Tags - Content is set dynamically by JavaScript -->
    <title></title>
    <meta name="description" content="">
    
    <!-- Meta Domain Verification -->
    <meta name="facebook-domain-verification" content="jlj6eyccp0p5h4om5v96siep52gkf0" />

    <link rel="icon" href="https://www.svgrepo.com/show/513281/chart-line.svg">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7RB3T4EVN4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-7RB3T4EVN4');
    </script>

    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '861128126243202');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=861128126243202&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->

    <!-- Tailwind CSS CDN --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Figtree (Fallback) --><link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@300;400;700;900&display=swap" rel="stylesheet">

    <!-- Custom Proxima Nova Font Definitions -->
    <style>
        @font-face {
            font-family: "Fonte1";
            font-weight: 900; /* Black */
            src: url('/fonts/proximanova_black.otf') format("opentype");
        }
        @font-face {
            font-family: "Fonte1";
            font-weight: 700; /* Bold */
            src: url('/fonts/proximanova_extrabold.otf') format("opentype");
        }
        @font-face {
            font-family: "Fonte1";
            font-weight: 500; /* Regular */
            src: url('/fonts/proximanova_bold.otf') format("opentype");
        }
        @font-face {
            font-family: "Fonte1";
            font-weight: 300; /* Light */
            src: url('/fonts/proximanova_light.otf') format("opentype");
        }
    </style>
    
    <style>
        /* Define as cores personalizadas para usar com as classes do Tailwind */
        body {
            font-family: "Fonte1", "Figtree", sans-serif;
            background-color: #fee600; /* Amarelo Vivo */
            color: #0a0080; /* Azul Escuro como cor de texto padrão */
        }
        .text-dark-blue {
            color: #0a0080; /* Azul Escuro */
        }
        .text-medium-blue {
            color: #0264eb; /* Azul Médio */
        }
        .bg-medium-blue {
            background-color: #0264eb; /* Azul Médio */
        }
        
        /* Estilo geral da caixa de cálculo */
        .calculator-box {
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            padding: 1.5rem;
            width: 240px;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Estilo para os inputs */
        .calculator-input {
            width: 100%;
            border: none;
            background-color: transparent;
            text-align: center;
            font-weight: 900; /* Black */
            font-size: 4rem; /* 64px */
            padding: 0;
            margin: 0;
            font-family: "Fonte1", "Figtree", sans-serif;
        }
        .calculator-input:focus {
            outline: none;
            ring: 0;
            box-shadow: none;
        }

        /* Variação de cor para o input ACOS */
        .calculator-input.acos {
            color: #0264eb;
        }

        /* Variação de cor para o input ROAS */
        .calculator-input.roas {
            color: #ffffff;
        }
        
        /* Remove setas de input de número */
        .calculator-input::-webkit-outer-spin-button,
        .calculator-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .calculator-input[type=number] {
            -moz-appearance: textfield;
        }
        
        /* Estilo para os símbolos '%' e 'x' */
        .symbol {
            font-size: 40px;
            font-weight: 900; /* Black */
        }

        /* Garante altura consistente para as descrições */
        .description-box {
            min-height: 96px; 
            transition: opacity 0.5s ease-in-out;
        }

        /* Garante largura consistente para os cards de ACOS/ROAS */
        .card-wrapper {
            width: 380px; 
        }

        /* --- Estilos Mobile --- */
        @media (max-width: 767px) {
            /* Header */
            .header-mobile-title {
                display: flex;
                flex-direction: column;
                font-weight: 300;
                line-height: 1.1;
                font-size: 18px;
            }
            /* Calculator cards scaling */
            .card-wrapper { 
                width: 340px;
            }
            .calculator-box {
                width: 200px;
                height: 120px;
                padding: 0.5rem;
            }
            
            /* Text and element scaling inside cards */
            #text-acos-intro, #text-roas-intro { font-size: 26px !important; }
            .calculator-input { font-size: 3rem; }
            .symbol { font-size: 32px; }
            .description-box {
                font-size: 7.5pt;
                margin-top: 0.5rem;
                line-height: 1.2;
                min-height: auto;
            }
            
            .parenthetical-text {
                font-size: 7.5pt !important;
            }

            /* Objective section text */
            .text-objective-mobile { 
                font-size: 16px !important; 
                line-height: 1.2 !important;
            }

            .advisory-link {
                line-height: 1.0 !important;
            }
            .advisory-line-1 {
                font-size: 14pt !important;
            }
            .advisory-line-2 {
                font-size: 11pt !important;
            }
        }
    </style>
</head>
<body class="flex flex-col items-center h-screen p-4 md:p-6">

    <main class="w-full max-w-5xl mx-auto flex flex-col flex-grow justify-center">
        
        <header class="w-full flex justify-between items-center flex-wrap gap-4 mb-10">
            <div class="flex items-center gap-3">
                <div class="flex flex-col gap-1">
                    <img id="brazil-flag" src="https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/br.svg" alt="Bandeira do Brasil" title="Português" width="20" height="20" class="cursor-pointer">
                    <img id="latam-flag" src="https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/ar.svg" alt="Bandeira da Argentina" title="Español" width="20" height="20" class="cursor-pointer">
                </div>
                <!-- Título para Desktop -->
                <h1 class="hidden md:block text-[42px] font-light text-dark-blue">Calculadora ACOS x ROAS</h1>
                <!-- Título para Mobile -->
                <div class="md:hidden text-dark-blue header-mobile-title">
                    <span>Calculadora</span>
                    <span>ACOS x ROAS</span>
                </div>
            </div>
            <!-- Logo Removido -->
        </header>

        <!-- Container da Calculadora --><div class="flex flex-col md:flex-row items-center justify-center gap-0 md:gap-8 w-full md:mb-10 mb-4">

            <!-- Card ACOS --><div class="flex flex-col items-center text-center card-wrapper">
                <p id="text-acos-intro" class="text-[32px] font-medium text-medium-blue mb-2"></p>
                <div class="calculator-box bg-white">
                    <div class="relative flex items-center justify-center">
                        <input id="acos-input" type="text" inputmode="decimal" class="calculator-input acos pr-10" placeholder="0">
                        <span class="absolute right-0 symbol font-black text-medium-blue">%</span>
                    </div>
                </div>
                <p id="text-acos-desc" class="description-box text-sm text-medium-blue mt-3 max-w-xs font-light"></p>
            </div>
            
            <!-- Divisor --><div id="text-corresponds" class="text-2xl font-bold text-medium-blue my-2 md:my-0">
                corresponde a...
            </div>

            <!-- Card ROAS --><div class="flex flex-col items-center text-center card-wrapper">
                <p id="text-roas-intro" class="text-[32px] font-medium text-medium-blue mb-2"></p>
                <div class="calculator-box bg-medium-blue">
                    <div class="relative flex items-center justify-center">
                         <input id="roas-input" type="text" inputmode="decimal" class="calculator-input roas pr-10" placeholder="0">
                         <span class="absolute right-0 symbol font-black text-white">x</span>
                    </div>
                </div>
                <p id="text-roas-desc" class="description-box text-sm text-medium-blue mt-3 max-w-xs font-light"></p>
            </div>

        </div>

        <!-- Seção de Objetivo --><div class="text-center max-w-[1220px] px-4 self-center mb-8">
            <p id="text-objective" class="text-2xl text-dark-blue font-light text-objective-mobile"></p>
        </div>

    </main>
    
    <footer id="page-footer" class="text-center pb-4">
        <!-- Motto Removido -->
        <!-- Seção de Consultoria Removida -->
        <p id="text-footer-author" class="mt-8" style="font-size: 7pt; color: #ffffff; font-weight: 300;"></p>
    </footer>

    <script>
        const acosInput = document.getElementById('acos-input');
        const roasInput = document.getElementById('roas-input');
        const utmSource = '?utm_source=roasxacos.onrender.com'; // Atualizado

        const siteData = {
            currencies: {
                br: 'R$1,00', ar: '$1', pe: 'S/1', py: '₲1', mx: '$1', ec: '$1',
                ni: 'C$1', cl: '$1', bo: 'Bs.1', cr: '₡1', gt: 'Q1', uy: '$1',
                pa: 'B/.1', hn: 'L1', sv: '$1', co: '$1', ve: 'Bs.S. 1', 'do': '$1'
            }
            // Links de assessoria removidos
        };

        const formatNumber = (num) => {
            if (isNaN(num) || !isFinite(num)) return '';
            const integerPartLength = Math.floor(num).toString().length;
            let finalNumStr;
            if (integerPartLength >= 3) {
                finalNumStr = num.toFixed(0);
            } else if (integerPartLength === 2) {
                finalNumStr = num.toFixed(1);
            } else {
                finalNumStr = num.toFixed(2);
            }
            const roundedNum = parseFloat(finalNumStr);
            if (roundedNum % 1 === 0) {
                return roundedNum.toString();
            } else {
                return finalNumStr.replace('.', ',');
            }
        };

        const parseValue = (value) => {
            if (typeof value !== 'string') return NaN;
            const standardizedValue = value.replace(',', '.');
            const validChars = [];
            let hasDecimalPoint = false;
            for (const char of standardizedValue) {
                if (!isNaN(parseInt(char))) validChars.push(char);
                else if (char === '.' && !hasDecimalPoint) {
                    validChars.push(char);
                    hasDecimalPoint = true;
                }
            }
            return parseFloat(validChars.join(''));
        };

        const limitInput = (value) => {
            value = value.replace(/[^0-9,.]/g, '').replace(',', '.');
            let parts = value.split('.');
            let integerPart = parts[0];
            let decimalPart = parts.length > 1 ? parts[1] : undefined;
            if (integerPart.length > 3) {
                integerPart = integerPart.substring(0, 3);
            }
            if (decimalPart !== undefined) {
                if (integerPart.length === 3) {
                    decimalPart = undefined;
                } else if (integerPart.length === 2) {
                    if (decimalPart.length > 1) {
                        decimalPart = decimalPart.substring(0, 1);
                    }
                } else {
                    if (decimalPart.length > 2) {
                        decimalPart = decimalPart.substring(0, 2);
                    }
                }
            }
            return (decimalPart !== undefined) ? integerPart + '.' + decimalPart : integerPart;
        };

        let hasTrackedAcosInput = false;
        acosInput.addEventListener('input', (event) => {
            if (event.isTrusted && !hasTrackedAcosInput) {
                try {
                    if (typeof gtag === 'function') gtag('event', 'calculator_use', { 'field': 'acos' });
                    if (typeof fbq === 'function') fbq('trackCustom', 'CalculatorUse', { field: 'acos' });
                } catch (e) { console.error('Tracking error:', e); }
                hasTrackedAcosInput = true;
            }
            const limitedValue = limitInput(event.target.value);
            event.target.value = limitedValue.replace('.', ',');
            const acosValue = parseValue(limitedValue);
            roasInput.value = (!isNaN(acosValue) && acosValue > 0) ? formatNumber(100 / acosValue) : '';
        });

        let hasTrackedRoasInput = false;
        roasInput.addEventListener('input', (event) => {
            if (event.isTrusted && !hasTrackedRoasInput) {
                try {
                    if (typeof gtag === 'function') gtag('event', 'calculator_use', { 'field': 'roas' });
                    if (typeof fbq === 'function') fbq('trackCustom', 'CalculatorUse', { field: 'roas' });
                } catch (e) { console.error('Tracking error:', e); }
                hasTrackedRoasInput = true;
            }
            const limitedValue = limitInput(event.target.value);
            event.target.value = limitedValue.replace('.', ',');
            const roasValue = parseValue(limitedValue);
            acosInput.value = (!isNaN(roasValue) && roasValue > 0) ? formatNumber(100 / roasValue) : '';
        });

        function initializeCalculator() {
            acosInput.value = '20';
            acosInput.dispatchEvent(new Event('input'));
        }
        
        function animateFlags() {
            const latamFlag = document.getElementById('latam-flag');
            if (!latamFlag) return;
            const flagUrls = ["https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/ar.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/mx.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/bo.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/cl.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/co.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/ec.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/py.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/pe.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/uy.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/ve.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/cr.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/sv.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/gt.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/hn.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/ni.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/pa.svg","https://raw.githubusercontent.com/lipis/flag-icons/5f40463ce1d8731f4e22dcb8acbc715b01573c54/flags/1x1/do.svg"];
            let currentFlagIndex = -1;
            const nextFlag = () => {
                currentFlagIndex = (currentFlagIndex + 1) % flagUrls.length;
                latamFlag.src = flagUrls[currentFlagIndex];
                const delay = (currentFlagIndex <= 1) ? 2000 : 1200;
                setTimeout(nextFlag, delay);
            };
            nextFlag();
        }

        const translations = {
            pt: {
                'seo-title': 'Calculadora de ACOS x ROAS | Conversor de Métricas | Calcular ROAS Objetivo',
                'seo-description': 'Converta ROAS para ACOS e vice-versa de forma fácil e rápida. Calcule ROAS Objetivo para campanhas do Mercado Livre.',
                'text-acos-intro': 'Um <span style="font-weight: 900;">ACOS</span> de',
                'text-roas-intro': 'Um <span style="font-weight: 900;">ROAS</span> de',
                'text-corresponds': 'corresponde a...',
                'text-acos-desc': 'O <span style="font-weight: 900;">ACOS</span> <span class="parenthetical-text">(Advertising Cost of Sales)</span> é o<br>percentual da receita por publicidade<br>investido em anúncios ou campanhas.',
                'text-roas-desc-1': 'O <span style="font-weight: 900;">ROAS</span> <span class="parenthetical-text">(Return on Advertising Spend)</span><br>mede quanto você ganhou em receita<br>por publicidade a cada <span style="font-weight: 700;">{{currency}}</span> investido.',
                'text-roas-desc-2': '<span class="animated-roas-text">Quanto <b style="font-weight: 900;">maior</b> a meta de <b style="font-weight: 900;">ROAS</b>, menos leilões a<br>campanha participa, pois o algoritmo fica <b style="font-weight: 900;">mais<br>específico</b> ao escolher o leilão em que participará.</span>',
                'text-roas-desc-3': '<span class="animated-roas-text">Quanto <b style="font-weight: 900;">menor</b> a meta de <b style="font-weight: 900;">ROAS</b>, mais leilões a<br>campanha participa, pois o algoritmo busca<br><b style="font-weight: 900;">maior visibilidade</b> para atingir o objetivo.</span>',
                'text-roas-desc-4': '<span class="animated-roas-text"><b style="font-weight: 900;">A mudança afeta só a métrica de configuração</b>,<br>sem impactar o desempenho das campanhas:<br>O CPC máximo segue definindo os lances.</span>',
                'text-objective': 'Defina quanto você deseja ter de retorno<span class="hidden md:inline"> nas campanhas com o <b style="font-weight: 700;">ROAS Objetivo</b>:<br>Mais clareza para avaliar a rentabilidade de suas campanhas!</span><span class="md:hidden"><br>nas campanhas com o <b style="font-weight: 700;">ROAS Objetivo</b>:<br>Mais clareza para avaliar a rentabilidade<br>de suas campanhas!</span>',
                // 'text-footer-motto' removido
                // 'text-advisory' removido
                'text-footer-author': `Desenvolvido por <a href="https://www.linkedin.com/in/silasbarboza/" target="_blank">Silas Barboza</a> | 2025`
            },
            es: {
                'seo-title': 'Calculadora de ACOS vs ROAS | Conversor de Métricas | Calcular ROAS Objetivo',
                'seo-description': 'Convierte ROAS a ACOS y viceversa de forma fácil y rápida. Calcula el ROAS Objetivo para campañas de Mercado Libre.',
                'text-acos-intro': 'Un <span style="font-weight: 900;">ACOS</span> de',
                'text-roas-intro': 'Un <span style="font-weight: 900;">ROAS</span> de',
                'text-corresponds': 'corresponde a...',
                'text-acos-desc': 'El <span style="font-weight: 900;">ACOS</span> <span class="parenthetical-text">(Costo de Ventas Publicitarias)</span><br>es el porcentaje de ingresos publicitarios<br>invertido en anuncios o campañas.',
                'text-roas-desc-1': 'El <span style="font-weight: 900;">ROAS</span> <span class="parenthetical-text">(Retorno de la Inversión Publicitaria)</span><br>mide cuántos ingresos generó<br>en publicidad por cada <span style="font-weight: 700;">{{currency}}</span> investido.',
                'text-roas-desc-2': '<span class="animated-roas-text">Cuanto <b style="font-weight: 900;">mayor</b> sea el ROAS objetivo,<br>menos subastas tendrá la campaña,<br>pues el algoritmo <b style="font-weight: 900;">se enfoca más</b>.</span>',
                'text-roas-desc-3': '<span class="animated-roas-text">Cuanto <b style="font-weight: 900;">menor</b> sea el <b style="font-weight: 900;">ROAS</b> objetivo,<br>más subastas tendrá la campaña,<br>buscando <b style="font-weight: 900;">mayor visibilidade</b>.</span>',
                'text-roas-desc-4': '<span class="animated-roas-text"><b style="font-weight: 900;">El cambio solo ajusta la métrica</b>,<br>sin afectar el rendimiento: el CPC<br>máximo sigue definiendo las subastas.</span>',
                'text-objective': 'Define cuánto retorno quieres obtener<span class="hidden md:inline"> de las campañas con <b style="font-weight: 700;">ROAS objetivo</b>:<br>¡Más claridad para evaluar la rentabilidade de tus campañas!</span><span class="md:hidden"><br>de las campañas com <b style="font-weight: 700;">ROAS objetivo</b>:<br>¡Más claridad para avaliar a rentabilidade<br>de tus campañas!</span>',
                // 'text-footer-motto' removido
                // 'text-advisory' removido
                'text-footer-author': `Desarrollado por <a href="https://www.linkedin.com/in/silasbarboza/" target="_blank">Silas Barboza</a> | 2025`
            }
        };

        let currentLang = 'pt';
        let roasDescState = 1;
        let roasDescInterval;

        function updateContentForLanguage() {
            const langPack = translations[currentLang];

            document.title = langPack['seo-title'];
            document.querySelector('meta[name="description"]').setAttribute('content', langPack['seo-description']);

            for (const key in langPack) {
                // Pula chaves que não correspondem a IDs de elementos
                if (key.startsWith('seo-') || key === 'text-advisory' || key === 'text-footer-motto') continue; 
                const element = document.getElementById(key);
                if (element) {
                    element.innerHTML = langPack[key];
                }
            }
            
            // Atualiza o link do autor com UTM
            const authorLink = document.querySelector('#text-footer-author a');
            if(authorLink) {
                authorLink.href = 'https://www.linkedin.com/in/silasbarboza/' + utmSource;
            }

            animateRoasDescription(); // Atualiza a descrição animada com o idioma e moeda corretos
        }

        function setLanguage(lang) {
            currentLang = lang;
            window.location.hash = lang;
            updateContentForLanguage();
        }

        function animateRoasDescription() {
            const roasDescEl = document.getElementById('text-roas-desc');
            const acosDescEl = document.getElementById('text-acos-desc');
            if (!roasDescEl || !acosDescEl) return; // Garante que os elementos existem
            if (roasDescInterval) clearInterval(roasDescInterval);

            const animationOrder = [1, 3, 2, 4];
            let animationIndex = 0;
            roasDescState = animationOrder[animationIndex];

            const updateText = () => {
                let countryCode = 'ar';
                if (currentLang === 'pt') {
                    countryCode = 'br';
                } else {
                    const userLang = navigator.language || navigator.userLanguage;
                    const langParts = userLang.split('-');
                    const detectedCountry = langParts.length > 1 ? langParts[1].toLowerCase() : 'ar';
                    if (siteData.currencies[detectedCountry]) countryCode = detectedCountry;
                }
                const currency = siteData.currencies[countryCode] || '$1';
                
                const langPack = translations[currentLang];
                acosDescEl.innerHTML = langPack['text-acos-desc']; // Atualiza descrição ACOS aqui também
                let roasText = langPack[`text-roas-desc-${roasDescState}`];
                if (roasText) {
                     roasText = roasText.replace('{{currency}}', currency);
                }
                roasDescEl.innerHTML = roasText;
                roasDescEl.style.opacity = 1;
            };

            roasDescInterval = setInterval(() => {
                roasDescEl.style.opacity = 0;
                setTimeout(() => {
                    animationIndex = (animationIndex + 1) % animationOrder.length;
                    roasDescState = animationOrder[animationIndex];
                    updateText();
                }, 500);
            }, 8000);
            
            updateText();
        }


        window.addEventListener('load', () => {
            const validLangs = ['pt', 'es'];
            let initialLang = window.location.hash.substring(1);

            if (!validLangs.includes(initialLang)) {
                const userLang = navigator.language || navigator.userLanguage;
                if (userLang.startsWith('pt') || userLang.startsWith('en')) {
                    initialLang = 'pt';
                } else {
                    initialLang = 'es';
                }
            }
            
            setLanguage(initialLang);
            initializeCalculator();
            animateFlags();
            
            document.getElementById('brazil-flag').addEventListener('click', () => setLanguage('pt'));
            document.getElementById('latam-flag').addEventListener('click', () => setLanguage('es'));
            
            const footer = document.getElementById('page-footer');
            if (footer) {
                footer.addEventListener('click', (event) => {
                    // Rastreio do link de consultoria removido
                    const authorLink = event.target.closest('#text-footer-author a');
                    if (authorLink) {
                        try {
                            if (typeof gtag === 'function') gtag('event', 'author_link_click', { 'link_url': authorLink.href });
                            if (typeof fbq === 'function') fbq('trackCustom', 'AuthorLinkClick');
                        } catch (e) { console.error('Tracking error:', e); }
                    }
                });
            }
        });
    </script>
</body>
</html>

